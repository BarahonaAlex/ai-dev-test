<div *ngIf="!showIaImage">
  <div class="imgcontainer" style="text-align: center;">
    <form [formGroup]="searchAllFormGroup" class="row">

      <mat-form-field class="col-12">
        <mat-label>Title</mat-label>
        <input matInput formControlName="title" (blur)="blur()">
      </mat-form-field>


      <mat-form-field class="col-12">
        <mat-label>Album title</mat-label>
        <input matInput formControlName="albumTitle" (blur)="blur()">
      </mat-form-field>


      <mat-form-field class="col-12">
        <mat-label>User Email</mat-label>
        <input matInput formControlName="userEmail" (blur)="blur()">

      </mat-form-field>



      <mat-form-field class="col-12">
        <mat-label>Photos per page</mat-label>
        <input matInput formControlName="perPage" type="number" min="1" (blur)="blur()">
      </mat-form-field>
    </form>

    <div *ngIf="searchAllFormGroup.invalid" class="alert">


      <div *ngIf="searchAllFormGroup.invalid">
        invalid email
      </div>

    </div>


  </div>

  <div style="text-align: center;">
    <button mat-raised-button (click)="previous()">{{prevText}}</button>
    <button mat-raised-button (click)="next()">{{nextText}}</button>
  </div>
</div>


<div class="imgcontainer">
  <div style="text-align: center;">
    <div *ngIf="!showIaImage">

      <div class="gallery" *ngFor="let image of _albums; let i=index">
        <img src="{{image.thumb}}" (click)="open(i)" />
      </div>
    </div>




    <div *ngIf="showIaImage && imgURL.length>0">
      <button mat-raised-button (click)="goBack()">Back</button>
      <p></p>

      <table *ngIf="selectedImg" class="center">
        <tr>
          <td> <strong> Album title: </strong></td>
          <td style="text-align: left;">{{selectedImg.album.title}}</td>
        </tr>

        <tr>
          <td><strong>Image title:</strong> </td>
          <td style="text-align: left;">{{selectedImg.title}}</td>
        </tr>

        <tr>
          <td><strong>User name: </strong></td>
          <td style="text-align: left;">{{selectedImg.album.user.name}}</td>
        </tr>
        <tr>
          <td><strong>User email:</strong> </td>
          <td style="text-align: left;">{{selectedImg.album.user.email}}</td>
        </tr>
      </table>
      <p></p>

      <img [src]="imgURL" width="300" height="200">
      <p></p>
      <label style="text-align: center;">Image generated by OpenAI</label>
    </div>

    <div class="wrapper" *ngIf="showGeneratingImage">

      <div class="overlay"></div>
      <div>
        <div class="loader"></div>
        <img src="../assets/images/loading.gif" width="400" height="350">
        <p>Generating image based on album title.</p>
      </div>
    </div>


    <div class="wrapper" *ngIf="showLoadingAlbums">

      <div class="overlay"></div>
      <div>
        <div class="loader"></div>
        <img src="../assets/images/loading.gif" width="400" height="350">
        <p>Loading albums...</p>
      </div>
    </div>


    <div class="wrapper" *ngIf="showErrorMessage">

      <div class="overlay"></div>
      <div>
        <div class="loader"></div>
        <img src="../assets/images/error.jpg" width="200" height="200">
        <p style="color: red;">An error occurred, contact the developer.</p>
      </div>
    </div>

  </div>
</div>
